<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
    <div class="tablero"></div>
    <button class="empezar" onclick="iniciarJuego()">Iniciar Juego</button>
    <div class="superior">
        <div class="mazo1">
            <div class="espacio-carta" id="carta-0"></div>
            <div class="espacio-carta" id="carta-1"></div>
            <div class="espacio-carta" id="carta-2"></div>
            <div class="espacio-carta" id="carta-3"></div>
            <div class="espacio-carta" id="carta-4"></div>
            <!-- <div class="espacio-carta" id="cartaReserva-0"></div> -->
        </div>
    </div>
    
    <button class="boton-centro">Voltear Carta</button>

    <!-- <div class="espacio-cartas">
        <div class="espacio-carta" id="pila-central"></div>
    </div> -->
    <div class="centro">
        <div class="pila">
            <div class="espacio-carta">
                <div class ="carta-mazo" id="pila-central"></div>
              <!--  <div class="carta-mazo">
                    <img src="img/reves.png" style="height: 151px; width: 96px;">
                </div>  -->
            </div>
            <div class="espacio-carta" id="seleccionada"></div>
        </div>
    </div>

    <div class="inferior">
        <div class="mazo2">
            <div class="espacio-carta" id="carta-5"></div>
            <div class="espacio-carta" id="carta-6"></div>
            <div class="espacio-carta" id="carta-7"></div>
            <div class="espacio-carta" id="carta-8"></div>
            <div class="espacio-carta" id="carta-9"></div>
            <!-- <div class="espacio-carta" id="cartaReserva-1"></div> -->
        </div>
    </div>
    <!-- <div class="jugador">JOSE</div>
    <div class="espacio-cartas">
        <div class="espacio-carta" id="carta-5"></div>
        <div class="espacio-carta" id="carta-6"></div>
        <div class="espacio-carta" id="carta-7"></div>
        <div class="espacio-carta" id="carta-8"></div>
        <div class="espacio-carta" id="carta-9"></div>
        <div class="espacio-carta" id="cartaReserva-1"></div>
    </div> -->

    <!-- <div>
        <button onclick="iniciarJuego()">Inicio</button>
    </div> -->

    <script>
        var baraja = [];
        var cartasJugador1 = [], cartasJugador2 = [];
        var cartasJugadores= new Array(1,2,3,4,5);
        //var cartasJugador1 = new Array(5), cartasJugador2 = new Array(5);
        var carta = {id:0, numero:0, tipo:"", color:"", espalda:true, src:""}
        const colores = {
            corazon: "rojo",
            diamante: "rojo",
            espada: "negro",
            trebol: "negro",
        };

        var cantCartas = new Array(1,2,3,4,5,6,7,8,9,10,11,12,13);
        var palosCartas = new Array("corazon","diamante","espada","trebol");

        function crearBaraja(){
            cantCartas.map(c => palosCartas.map(p => (
                (carta = {
                    id:baraja.length,
                    numero: c,
                    tipo: palosCartas[palosCartas.indexOf(p)],
                    color: colores[palosCartas[palosCartas.indexOf(p)]],
                    espalda: true,
                    src: ""+c+"_"+palosCartas[palosCartas.indexOf(p)],
                })
                , baraja.push(carta))
            ));
        }
        
        //console.log(baraja); 

        function revolverBaraja(){
            baraja.sort(function() {return Math.random() - 0.5}); 
            //console.log(baraja); 
        }

        function iniciarJuego(){
            crearBaraja();
            revolverBaraja();
            //console.log(baraja);
            asignarCartas(cartasJugador1);
            console.log(cartasJugador1);
            asignarCartas(cartasJugador2);
            //console.log(cartasJugador2);
            agregarCartasCasillas(cartasJugador1,5);
            agregarCartasCasillas(cartasJugador2,10);
            agregarCartasPilar();
        }
        
        function asignarCartas(cartasJugador){
            
            cartasJugadores.map(c=> ( 
                (carta = {
                    id:c-1,
                    numero: baraja[c-1].numero,
                    tipo: baraja[c-1].tipo,
                    color: baraja[c-1].color,
                    espalda: true,
                    src: baraja[c-1].src,
                })
                , cartasJugador.push(carta)
                ,baraja.shift())
                );
        }
        

        function crearCarta(carta){
            const cartaHTML = document.createElement("div");
            const imagen = document.createElement("img");
            //imagen.src = "img/reves.png";
            //console.log(carta);
            imagen.src = carta.espalda ? "img/reves.png" : "img/"+carta.src+".png";
            //imagen.src = carta.espalda ? "img/"+carta.src+".png" : "img/reves.png";
            cartaHTML.dataset.numero = carta.numero;
            cartaHTML.dataset.tipo = carta.tipo;
            cartaHTML.dataset.color = carta.color;
            cartaHTML.dataset.id = carta.id;
            cartaHTML.dataset.src = carta.src;
            imagen.classList.add("carta");
            cartaHTML.appendChild(imagen);

            return cartaHTML;
        };

        function agregarCartasCasillas(cartasJugador, num){
            cartasJugadores.map(c=> 
                (document.querySelector("#carta-"+(num-c)).appendChild(crearCarta(cartasJugador[c-1])))
            );
        }

        function crearCartaPilar(carta){
            /* const pila = document.querySelector('#pila-central');
            const carta = baraja[i]; */
            console.log(carta);
            const cartaHtml = document.createElement("div");
            const imagen = document.createElement("img");
            imagen.src = "img/"+carta.src+".png";
            imagen.style = "height: 151px; width: 96px";
            cartaHtml.classList.add("sobreponer");
            cartaHtml.appendChild(imagen);

            return cartaHtml;
            //pila.appendChild(cartaHtml)
        }

        function agregarCartasPilar(){
            //console.log(baraja);
            baraja.map(b=>( 
                (document.querySelector("#pila-central").appendChild(crearCartaPilar(b)))
            ));
        }
    </script>
</body>
</html>